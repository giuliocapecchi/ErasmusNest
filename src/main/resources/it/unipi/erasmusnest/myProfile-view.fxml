<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane fx:id="rootPane" prefHeight="356.0" prefWidth="423.0" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="it.unipi.erasmusnest.controllers.MyProfileController">
    <BorderPane prefHeight="200.0" prefWidth="200.0">
        <top>
            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #ff8000">
                <Label style="-fx-font-size: 25px; -fx-text-fill: white; -fx-font-style: italic;" text="My profile">
                    <HBox.margin>
                        <Insets bottom="5.0" left="20.0" right="20.0" top="5.0" />
                    </HBox.margin>
                </Label>
            </HBox>
        </top>
        <center>
            <ScrollPane fx:id="scrollPane" fitToWidth="true" BorderPane.alignment="CENTER">
                <VBox>
                    <VBox fx:id="personalInfoVbox" spacing="10">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #ff6200;" text="My information" wrapText="true" />
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label minWidth="75" style="-fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Name:" />
                            <Label fx:id="nameLabel" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label minWidth="75" style="-fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Surname:" />
                            <Label fx:id="lastNameLabel" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label minWidth="75" style="-fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Email:" />
                            <Label fx:id="emailLabel" />
                            <Button onAction="#onFollowersButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="View Followers" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label minWidth="75" style="-fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Password:" />
                            <PasswordField fx:id="passwordField" editable="false" minWidth="200" text="••••••" />
                            <Button fx:id="modifyPasswordButton" onAction="#onModifyPasswordButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="Change Password" />
                        </HBox>
                        <VBox fx:id="passwordChangeOuterBox" alignment="TOP_CENTER" spacing="10" visible="false">
                            <VBox fx:id="passwordChangeBox" style="-fx-border-color: red; -fx-border-width: 5px; -fx-padding: 10px; -fx-background-color: white; -fx-background-radius: 5px; -fx-border-radius: 5px;">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label minWidth="75" text="New password:" />
                                    <PasswordField fx:id="newPasswordField" minWidth="200" onKeyReleased="#checkNewPassword" />
                                </HBox>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label minWidth="75" text="Confirm password:" />
                                    <PasswordField fx:id="confirmNewPasswordField" minWidth="200" onKeyReleased="#checkNewPassword" />
                                </HBox>
                                <HBox>
                                    <Button fx:id="buttonPwdUpdate" disable="true" onAction="#onUpdatePasswordClick" text="Update" />
                                    <Button onAction="#onBackButtonClick" text="Back" />
                                </HBox>
                            </VBox>
                        </VBox>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label minWidth="75" style="-fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Study Field:" />
                            <ComboBox fx:id="studyFieldComboBox" minWidth="200" onAction="#onStudyFieldSelectionChanged" />
                        </HBox>
                        <HBox spacing="10">
                            <Label minWidth="75" style="-fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Cities of Interest:">
                            <HBox.margin>
                                <Insets top="5.0" />
                            </HBox.margin>
                            </Label>
                            <VBox fx:id="citiesVBox" alignment="CENTER">
                                <!-- Qui verranno inserite le checkbox -->
                                <TitledPane fx:id="cityTitlePane" onMouseClicked="#getCitiesOfInterest" text="Update cities of interest" />
                            </VBox>
                            <Button fx:id="updateCitiesOfInterestButton" onAction="#onUpdateCitiesOfInterestButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="Update" />
                        </HBox>
                     <HBox.margin>
                        <Insets left="10.0" top="50.0" />
                     </HBox.margin>
                    </VBox>
                    <VBox spacing="10">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #ff6200;" text="My reservations" wrapText="true" />
                        <Button onAction="#onReservationsButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="Go to reservations" />
                        <HBox.margin>
                            <Insets right="60.0" top="50.0" />
                        </HBox.margin>
                    </VBox>
                    <VBox fx:id="apartmentsContainerVBox" spacing="10">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #ff6200;" text="My apartments" wrapText="true" />
                        <Button fx:id="uploadHouseButton" onAction="#onUploadHouseButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="Upload new apartment" />
                        <!-- Qui inizia la sezione modificata -->
                        <VBox fx:id="apartmentsContainer" spacing="10">
                            <!-- Qui verranno aggiunti dinamicamente gli HBox per ogni appartamento -->
                        </VBox>
                         <HBox.margin>
                            <Insets right="60.0" top="50.0" />
                         </HBox.margin>
                    </VBox>
                    <VBox spacing="10">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #ff6200;" text="Reservations for my apartments" wrapText="true" />
                        <Button onAction="#onReservationsMyApartmentsButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="Go to reservations for my apartments" />
                        <HBox.margin>
                            <Insets right="60.0" top="50.0" />
                        </HBox.margin>
                    </VBox>
                    <VBox fx:id="favouritesContainerVBox" spacing="10">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #ff6200;" text="My favourite ones" wrapText="true" />
                        <Button onAction="#onFavouritesButtonClick" style="-fx-background-color: orange; -fx-border-color: red; -fx-border-width: 1px;" text="See your favourite ones" />
                        <HBox.margin>
                            <Insets right="60.0" top="50.0" />
                        </HBox.margin>
                    </VBox>
                </VBox>
            </ScrollPane>
        </center>
        <bottom>
            <VBox fx:id="adminContainer" alignment="CENTER_RIGHT" />
            <ToolBar nodeOrientation="RIGHT_TO_LEFT" prefHeight="40.0" prefWidth="256.0" style="-fx-background-color: orange;" BorderPane.alignment="CENTER">
                <Button onAction="#logoutButtonClick" text="Logout" />
                <Button onAction="#onBack" text="Homepage" />
            </ToolBar>
        </bottom>
    </BorderPane>
</StackPane>
